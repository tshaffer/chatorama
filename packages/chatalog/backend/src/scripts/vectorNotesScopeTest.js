// vectorNotesScopeTest.js

// const queryVector = 
// [-0.0034129414707422256,0.0038744343910366297,0.009489556774497032,0.031978122889995575,-0.014143089763820171,-0.00845777802169323,0.004032359924167395,0.034055717289447784,-0.053736720234155655,0.0024846915621310472,0.027205267921090126,-0.025829562917351723,0.010303749702870846,-0.010647675953805447,0.010289711877703667,0.012683157809078693,-0.015216981992125511,-0.025394391268491745,-0.04551056772470474,0.05654428154230118,-0.013651765882968903,-0.021702447906136513,0.03369073569774628,0.04281530901789665,-0.044191014021635056,0.009222838096320629,-0.054073628038167953,-0.04744778573513031,-0.020761914551258087,-0.06771837919950485,-0.029900526627898216,-0.028833653777837753,-0.007826076820492744,-0.02428540401160717,0.020888255909085274,-0.0014362430665642023,0.021618220955133438,-0.0029110899195075035,-0.005534404888749123,0.031809668987989426,-0.03734056279063225,0.009257933124899864,0.07889246940612793,0.07647796720266342,0.06805528700351715,-0.006352107040584087,-0.06171019375324249,-0.007222451269626617,0.014781809411942959,0.04747585952281952,0.01920371875166893,-0.00806471984833479,0.0049799117259681225,0.03590870648622513,-0.027822932228446007,-0.07041363418102264,-0.03781785070896149,0.0825423002243042,-0.01989157125353813,0.045033279806375504,0.014669506810605526,-0.03509451448917389,0.02834233082830906,-0.018066655844449997,-0.05668466165661812,-0.018951037898659706,-0.012500666081905365,-0.010563449002802372,-0.009229857474565506,-0.0079313600435853,-0.0013195538194850087,0.03902510181069374,-0.04640898481011391,0.02356947585940361,-0.008022606372833252,-0.006257351953536272,-0.03621754050254822,0.019161604344844818,0.021295351907610893,-0.04371372610330582,-0.02189897745847702,0.0030356755014508963,0.017785899341106415,0.006885543931275606,0.021772637963294983,-0.02521190047264099,0.03565602749586105,0.007075054105371237,-0.03823898360133171,0.012374325655400753,-0.04172036051750183,-0.004576324950903654,-0.026685869321227074,0.029732072725892067,0.03209042549133301,0.0043131159618496895,0.009742237627506256,-0.05654428154230118,0.006155577953904867,0.011286395601928234,0.03899702429771423,-0.040063899010419846,-0.005797613877803087,0.01417116541415453,0.0029198636766523123,0.05168720334768295,-0.04475252702832222,-0.03731248900294304,0.0031672799959778786,0.008752572350203991,0.025254013016819954,0.0026619189884513617,0.02886172942817211,-0.023386985063552856,-0.013076215982437134,-0.05907108634710312,0.046886272728443146,-0.05042380094528198,-0.006646901369094849,-0.006190672516822815,-0.01254979893565178,0.013328896835446358,-0.007524264045059681,0.005271196365356445,-0.01889488659799099,0.0005215922137722373,0.010893337428569794,0.04236609861254692,-0.009601859375834465,-0.02967592142522335,0.05957644805312157,-0.03635791689157486,0.011230245232582092,0.005176440812647343,-0.02008810080587864,-0.04542633891105652,-0.04907616972923279,-0.008071738295257092,-0.016003098338842392,0.013349953107535839,0.02609628066420555,-0.04090616852045059,0.07176126539707184,-0.01968100480735302,-0.016873443499207497,-0.059744901955127716,-0.03416801989078522,-0.010219522751867771,-0.03127623349428177,0.049160394817590714,0.004706174600869417,-0.051518749445676804,-0.042927611619234085,0.006001161877065897,-0.029928602278232574,-0.02278335951268673,0.008001549169421196,0.0030023357830941677,-0.018838735297322273,0.0023952005431056023,-0.019021227955818176,-0.029563618823885918,0.007496188394725323,-0.053203284740448,-0.007440037094056606,0.01572234183549881,-0.04697049781680107,0.023372946307063103,-0.05314713343977928,0.053708646446466446,-0.011412736028432846,0.004572815261781216,-0.011146018281579018,0.037396714091300964,-0.06973981857299805,0.014571242965757847,0.05067647993564606,-0.05281022563576698,-0.008787666447460651,0.00017985938757192343,0.0327361635863781,0.022909699007868767,0.038968950510025024,0.015764456242322922,-0.03933393210172653,0.0168874803930521,0.01507660374045372,-0.01043710857629776,0.05348404124379158,0.03329767659306526,-0.04273108020424843,0.023386985063552856,0.005229082889854908,0.0006137153250165284,0.015736380591988564,-0.05749885365366936,0.04697049781680107,-0.029254788532853127,-0.008942082524299622,0.04051310941576958,-0.02759832702577114,-0.024032723158597946,0.009391291998326778,-0.03161313757300377,-0.000747513142414391,0.004713193513453007,-0.04062541201710701,-0.0009677312336862087,0.005776557140052319,0.02097248286008835,0.04871118813753128,0.00897015817463398,-0.016115400940179825,0.06238400936126709,0.0069276574067771435,-0.04000774770975113,-0.01379916351288557,-0.0014467714354395866,0.017575332894921303,0.026854323223233223,-0.025590920820832253,0.0023794081062078476,0.08203693479299545,0.04256262630224228,0.03290461748838425,-0.007938379421830177,-0.010114239528775215,-0.013778106309473515,-0.024874992668628693,-0.01147590670734644,-0.024004647508263588,-0.023962534964084625,-0.02230607345700264,-0.0208040289580822,0.023892344906926155,0.005092214327305555,-0.025633033365011215,0.0337749607861042,0.03840743750333786,-0.02862308733165264,0.024538084864616394,0.014655469916760921,0.016087325289845467,-0.007861170917749405,-0.03826705738902092,0.026082243770360947,-0.03936200961470604,0.0010888073593378067,-0.05940799415111542,-0.009054385125637054,-0.05348404124379158,0.04649321362376213,0.022109543904662132,-0.01523101981729269,0.007011883892118931,0.009271970950067043,-0.007229470182210207,-0.020003873854875565,0.05323135852813721,-0.0508168563246727,-0.007183847017586231,0.0045552682131528854,-0.025183824822306633,-0.06137328967452049,-0.04396640881896019,0.02244645170867443,-0.008696421049535275,-0.05480359494686127,0.02271316945552826,0.0409342423081398,-0.008233172819018364,-0.01420625951141119,0.022727208212018013,-0.02681220881640911,-0.0007957681082189083,0.009608877822756767,-0.002095142612233758,0.004948326386511326,-0.004414889961481094,0.009033327922224998,-0.019161604344844818,-0.02561899647116661,0.0022934265434741974,-0.019765231758356094,0.027247382327914238,0.031978122889995575,0.045819398015737534,-0.01815088279545307,0.06204710155725479,-0.01787012629210949,-0.004576324950903654,-0.011230245232582092,0.006218748167157173,0.028735388070344925,0.05646005645394325,0.01417116541415453,-0.013420142233371735,-0.010731902904808521,0.0005610735388472676,0.0020530291367322206,0.022095507010817528,0.006924147717654705,-0.03211849927902222,-0.004520173650234938,0.022937774658203125,-0.002037236699834466,0.029254788532853127,-0.004432437475770712,0.03169736638665199,0.03284846618771553,-0.04472444951534271,-0.037200186401605606,0.0037656414788216352,0.0034445265773683786,0.06558462977409363,0.011567152105271816,-0.03211849927902222,0.04163613170385361,0.006390711292624474,-0.056123148649930954,0.025969941169023514,-0.01079507265239954,0.0061345212161540985,-0.018403563648462296,-0.0018915943801403046,-0.0477566160261631,-0.056123148649930954,-0.0255768820643425,0.009629935026168823,-0.004032359924167395,-0.005208026152104139,-0.015132755041122437,-0.0030900719575583935,-0.01314640510827303,-0.030911248177289963,-0.0651354193687439,0.028468670323491096,-0.018993152305483818,0.022516639903187752,0.006727618630975485,0.019077379256486893,0.009756275452673435,-0.023990610614418983,-0.012718251906335354,-0.042113419622182846,0.0158627200871706,0.049918439239263535,-0.03113585337996483,-0.0378740020096302,0.012374325655400753,0.02151995711028576,0.04747585952281952,0.0295074675232172,-0.002028462942689657,0.06519157439470291,-0.021548032760620117,0.021955128759145737,0.035150665789842606,-0.002496974775567651,-0.0005400168593041599,0.011426773853600025,-0.0158627200871706,-0.00844374019652605,0.04107461869716644,0.03369073569774628,-0.007489169482141733,-0.0007755887927487493,-0.05238909274339676,0.009208801202476025,-0.016690950840711594,-0.02803349867463112,0.05789191275835037,0.00628542760387063,-0.031500834971666336,-0.056768886744976044,0.015371397137641907,0.007917322218418121,0.02411695010960102,0.014894112013280392,0.008450759574770927,0.028047535568475723,0.01130745280534029,-0.03029358573257923,0.036105237901210785,-0.00539051741361618,0.023246606811881065,-0.0029198636766523123,-0.011167074553668499,-0.019456399604678154,-0.004955345299094915,-0.037368640303611755,-0.05480359494686127,0.003635791828855872,-0.035964857786893845,-0.009075441397726536,0.04492098093032837,0.01565215364098549,0.003321695839986205,-0.0429837629199028,0.0014818658819422126,0.014978338964283466,0.0009747501462697983,-0.050732631236314774,0.027654478326439857,-0.01332187745720148,-0.0037586225662380457,-0.012262023985385895,-0.012521723285317421,0.03416801989078522,0.00876661017537117,0.01779993809759617,-0.021477842703461647,0.032455407083034515,0.0283142551779747,-0.014444902539253235,-0.04413486272096634,-0.04312413930892944,0.015511775389313698,0.009987899102270603,-0.0015538096195086837,-0.011033715680241585,-0.027682553976774216,-0.04758816212415695,-0.0037305469159036875,0.0250715222209692,0.030237434431910515,0.023920420557260513,-0.024818841367959976,-0.010584505274891853,-0.050395723432302475,-0.06013796105980873,0.016592686995863914,-0.005632669664919376,0.005829198751598597,0.002761938376352191,-0.030518190935254097,-0.03113585337996483,-0.019638890400528908,-0.014992376789450645,-0.025759374722838402,-0.08074545860290527,-0.008892949670553207,0.022249922156333923,-0.024060798808932304,-0.03298884257674217,0.016003098338842392,0.009917709976434708,-0.03475760668516159,0.00043363659642636776,-0.05957644805312157,0.02714911662042141,0.012886705808341503,-0.01872643269598484,-0.03060241788625717,0.0022004260681569576,0.015174868516623974,-0.02486095391213894,-0.006948714144527912,0.034504927694797516,-0.03015320748090744,0.053905174136161804,0.012374325655400753,0.002758428920060396,-0.01238134503364563,-0.0002969873312395066,0.020958444103598595,-0.025590920820832253,0.05620737373828888,-0.010514317080378532,-0.021955128759145737,0.008668345399200916,-0.02347121201455593,-0.0910772830247879,-0.044359467923641205,-0.05160297453403473,0.008134908974170685,0.06670765578746796,0.0060818796046078205,-0.007819058373570442,0.024439821019768715,-0.02616647072136402,-0.01719631254673004,-0.02414502575993538,0.03868819400668144,0.005302781239151955,0.061036381870508194,0.01090035680681467,0.029339013621211052,-0.007145243231207132,-0.022699132561683655,0.024636348709464073,0.031978122889995575,0.00953167024999857,-0.01746303029358387,-0.02793523482978344,-0.00806471984833479,-0.03225887939333916,-0.027205267921090126,0.034701455384492874,-0.005029044114053249,-0.0027601835317909718,-0.04045695811510086,-0.00029172314680181444,0.006320522166788578,0.004246436525136232,0.00331292231567204,-0.0058923689648509026,0.019358133897185326,0.0494692288339138,-0.025394391268491745,-0.024636348709464073,-0.02435559406876564,0.04812159761786461,-0.00806471984833479,-0.039614688605070114,-0.02132342755794525,-0.02939516492187977,-0.008331437595188618,0.0027285986579954624,-0.010563449002802372,-0.01841760240495205,-0.0005948520265519619,-0.018164921551942825,-0.010717865079641342,0.017140161246061325,-0.02118304930627346,0.003562093246728182,-0.06844834238290787,-0.041523829102516174,-0.05393325164914131,-0.02036885730922222,0.0179122406989336,-0.0037270374596118927,-0.03523489460349083,-0.0011730341939255595,-0.014079919084906578,-0.012598930858075619,0.02230607345700264,0.02132342755794525,-0.02462231181561947,0.006450371816754341,0.008633250370621681,0.005432630889117718,-0.011096885427832603,0.0007132960017770529,0.02561899647116661,0.04461214691400528,-0.038968950510025024,-0.0002265789662487805,0.03032166138291359,0.0012019871501252055,-0.01886681094765663,0.01099862065166235,-0.011826851405203342,0.020481158047914505,0.016424233093857765,0.018361451104283333,-0.0008001549285836518,-0.027921196073293686,0.006994336843490601,0.010865261778235435,-0.022797396406531334,0.017982428893446922,-0.04267492890357971,-0.013174480758607388,0.010156353004276752,-0.041186921298503876,-0.002386427018791437,-0.015975022688508034,0.01422029733657837,0.014978338964283466,-0.01865624450147152,0.015104679390788078,-0.01476777158677578,-0.004635985475033522,0.02719123102724552,0.023372946307063103,-0.0075312829576432705,-0.001373950275592506,-0.041973039507865906,-0.02070576325058937,-0.008345475420355797,-0.03237118199467659,0.0030462038703262806,-0.005281724501401186,0.0028549388516694307,0.018305299803614616,0.03604908660054207,0.000026978908863384277,-0.00031453458359465003,0.001018618349917233,0.014585280790925026,0.014627394266426563,0.0014669507509097457,0.0029163542203605175,-0.002461880212649703,-0.02247452735900879,0.0015827625757083297,-0.020593460649251938,-0.027780817821621895,-0.015146792866289616,0.00917370617389679,-0.01691555604338646,-0.018670281395316124,0.001452035503461957,-0.01325168926268816,0.024130988866090775,-0.04902001842856407,-0.015441586263477802,0.004962364211678505,0.023415060713887215,-0.0007540934020653367,-0.019807344302535057,-0.031023550778627396,-0.0168874803930521,-0.007622528821229935,-0.0009493066463619471,-0.029900526627898216,0.006123993080109358,0.016466345638036728,0.01113899890333414,-0.00019367785716895014,0.02234818786382675,-0.0062608616426587105,0.02390638366341591,-0.003102355170994997,-0.05076070502400398,-0.030518190935254097,-0.0059028975665569305,-0.019245831295847893,0.044668298214673996,0.0031760535202920437,-0.03995159640908241,-0.033073071390390396,-0.005608103703707457,-0.0104020144790411,0.005443159490823746,0.014809885062277317,-0.002363615669310093,-0.014557205140590668,0.023555438965559006,-0.0018371978076174855,0.030714718624949455,-0.005615122616291046,0.014571242965757847,-0.056572359055280685,-0.036554448306560516,0.004695645999163389,0.017954353243112564,-0.014339618384838104,0.019793305546045303,-0.007552339695394039,-0.015385434962809086,0.01349033135920763,0.0004505258402787149,0.03711595758795738,-0.014823922887444496,0.017420917749404907,-0.002193407155573368,0.046268608421087265,0.00013456553278956562,0.013757050037384033,-0.004779872950166464,-0.011911078356206417,-0.0015546870417892933,0.007099620532244444,-0.004421908874064684,-0.01569426618516445,0.041018467396497726,0.02230607345700264,0.08877508342266083,-0.021576108410954475,0.022025316953659058,-0.034673381596803665,0.019666966050863266,0.018880849704146385,-0.013230632059276104,-0.009166687726974487,0.018305299803614616,0.022867586463689804,0.013771087862551212,-0.018782583996653557,-0.030827021226286888,0.025801487267017365,-0.009650991298258305,-0.046240534633398056,0.019456399604678154,0.00037244055420160294,-0.014613356441259384,-0.010724883526563644,-0.03456107899546623,-0.014543167315423489,0.003437507664784789,0.031837742775678635,-0.025731299072504044,-0.013027084060013294,0.013764068484306335,0.023836195468902588,-0.01170051097869873,-0.007615509908646345,0.04236609861254692,-0.02602609246969223,0.004049906972795725,0.004397342912852764,0.031079702079296112,0.01934409700334072,0.023288719356060028,0.03840743750333786,-0.003916548099368811,-0.029310939833521843,-0.0055940658785402775,0.0065451269038021564,-0.017968391999602318,0.03397149220108986,-0.018529903143644333,0.012219910509884357,-0.025492655113339424,-0.007039959542453289,0.036273691803216934,0.004085001535713673,-0.01732265204191208,0.002086368855088949,-0.027500061318278313,-0.04172036051750183,0.002600503619760275,-0.022909699007868767,-0.008001549169421196,-0.008429702371358871,-0.036414068192243576,0.020425008609890938,0.028805578127503395,0.0023829175624996424,-0.020551348105072975,0.027977347373962402,-0.012802478857338428,0.030574342235922813,-0.024271367117762566,-0.021632259711623192,0.00608889851719141,-0.017168236896395683,0.002488201018422842,-0.05747077614068985,0.029872450977563858,0.006306484341621399,-0.03312922269105911,-0.03192197158932686,0.01548369973897934,0.010100201703608036,-0.030209358781576157,0.010170390829443932,-0.016003098338842392,0.01202338095754385,0.012002323754131794,0.019793305546045303,0.012879687361419201,-0.05923954024910927,0.009524651803076267,-0.024102913215756416,-0.010205484926700592,0.01787012629210949,-0.03248348459601402,0.0477566160261631,0.025324201211333275,-0.022488566115498543,0.02435559406876564,0.050227269530296326,-0.0036147350911051035,-0.0230220016092062,-0.01664883829653263,-0.006229276303201914,-0.005692330189049244,-0.020677687600255013,0.006650410592556,-0.004583343863487244,-0.01023356057703495,0.0301812831312418,-0.02523997612297535,-0.004393833223730326,-0.008219134993851185,0.040400806814432144,0.03144468367099762,-0.006639882456511259,-0.006639882456511259,0.02602609246969223,-0.042281873524188995,-0.06878525018692017,0.04121499881148338,0.019638890400528908,-0.027233343571424484,-0.014936225488781929,-0.013588596135377884,0.0125357611104846,-0.021239200606942177,-0.0001289723441004753,0.005723915528506041,0.03178159147500992,-0.026419151574373245,0.040232352912425995,0.02449597232043743,0.010893337428569794,0.009601859375834465,0.003114638151600957,0.031978122889995575,-0.015034490264952183,-0.015806568786501884,-0.011447831057012081,0.0031795629765838385,-0.0008694666321389377,-0.03677905350923538,0.020453084260225296,-0.010717865079641342,0.00001961728594324086,0.014276448637247086,-0.02684028446674347,-0.0023671251256018877,0.026587605476379395,0.03430839627981186,0.011588209308683872,0.006201200652867556,0.004148171748965979,0.05494397133588791,-0.01991964690387249,-0.015146792866289616,0.0015906589105725288,0.01695767045021057,0.039137404412031174,-0.018221072852611542,0.03731248900294304,0.03029358573257923,-0.008703439496457577,0.01975119300186634,-0.02698066271841526,-0.017884165048599243,0.024552123621106148,-0.014269430190324783,0.024004647508263588,-0.04857080802321434,-0.0051588937640190125,-0.05637582764029503,-0.01767359860241413,0.005278215277940035,-0.024243291467428207,0.022628942504525185,-0.009791369549930096,0.02735968306660652,0.01170051097869873,-0.02032674290239811,-0.03265193849802017,-0.02970399707555771,0.017743786796927452,-0.01624174229800701,-0.03885664790868759,0.03568410128355026,0.017069971188902855,-0.003169034607708454,-0.03680712729692459,0.04972190782427788,-0.020031949505209923,0.005590556189417839,-0.0023969553876668215,0.004190285224467516,0.005874821916222572,0.014655469916760921,-0.015343322418630123,-0.00716279074549675,-0.018543941900134087,-0.005516857840120792,-0.02800542302429676,0.009082460775971413,-0.002360106213018298,0.0009721180540509522,0.0038814533036202192,-0.0172243881970644,-0.033269599080085754,0.001645055366680026,0.008949100971221924,-0.01746303029358387,-0.021056709811091423,-0.0057625193148851395,0.02612435631453991,0.016943631693720818,0.028945956379175186,0.009475518949329853,0.008899969048798084,0.008198078721761703,0.0008729760884307325,-0.02516978606581688,0.008563061244785786,-0.014388751238584518,0.010128277353942394,-0.011047753505408764,-0.0008203343022614717,-0.000011021870705008041,-0.0313885323703289,0.005004477687180042,0.0008782402146607637,0.0028812596574425697,-0.007229470182210207,0.038351286202669144,0.06687610596418381,0.008205097168684006,0.059295691549777985,-0.011560133658349514,-0.0013081480283290148,0.025464579463005066,-0.013048140332102776,-0.016719026491045952,0.016424233093857765,-0.05505627393722534,-0.024060798808932304,-0.06698840856552124,-0.014332599937915802,-0.018305299803614616,0.009054385125637054,0.02793523482978344,-0.03335382789373398,-0.028805578127503395,0.026952587068080902,-0.011482925154268742,0.0036112256348133087,-0.016719026491045952,0.014950263313949108,-0.0006562674534507096,-0.014781809411942959,-0.01381320133805275,-0.005671273451298475,0.023723892867565155,-0.021435730159282684,0.017406878992915154,-0.014030787162482738,0.050732631236314774,-0.018291261047124863,-0.019161604344844818,-0.018361451104283333,0.002449597232043743,-0.0035252440720796585,0.049272697418928146,0.014332599937915802,-0.0004310045042075217,-0.02674202062189579,0.014599318616092205,0.012276061810553074,-0.020832104608416557,-0.013244669884443283,0.03318537399172783,-0.0208040289580822,-0.04301183670759201,-0.005987124051898718,0.02585763856768608,0.02347121201455593,0.03809860721230507,0.041018467396497726,0.044836752116680145,-0.00809981394559145,0.0075944531708955765,-0.014227316714823246,0.015989061444997787,-0.022909699007868767,0.01763148419559002,0.01695767045021057,-0.06564077734947205,-0.019709080457687378,0.029310939833521843,-0.035768330097198486,0.005783576052635908,0.006436333991587162,0.01650846004486084,-0.011581189930438995,0.007440037094056606,0.024467896670103073,-0.003635791828855872,0.024369630962610245,0.024201177060604095,-0.001425714697688818,0.016325969249010086,0.031332384794950485,0.02700873836874962,-0.006790788844227791,0.01982138119637966,0.011146018281579018,-0.011131980456411839,0.00501500628888607,0.004565796349197626,0.013265727087855339,0.0023109738249331713,-0.009082460775971413,-0.01801050454378128,-0.03565602749586105,-0.023836195468902588,0.013223613612353802,-0.02049519680440426,-0.020846141502261162,-0.003460319247096777,-0.021913014352321625,0.023794081062078476,-0.00859815627336502,0.01548369973897934,-0.02691047452390194,-0.0003472163516562432,0.018922962248325348,-0.01523101981729269,0.016297893598675728,0.011658397503197193,-0.013139386661350727,-0.012781422585248947,-0.022741245105862617,0.0014011485036462545,0.0089561203494668,0.004169228486716747,-0.012921800836920738,0.03256770968437195,0.03776169940829277,0.008829779922962189,-0.002326766261830926,0.013195537962019444,-0.027205267921090126,0.01207251287996769,0.07249122858047485,0.003593678353354335,0.005976595915853977,0.025183824822306633,-0.019147567451000214,-0.03773362189531326,0.024411745369434357,0.009440424852073193,-0.007938379421830177,0.03141660988330841,0.006053803954273462,0.02647530287504196,0.005313309375196695,0.011040734127163887,-0.0005093091749586165,-0.005969577003270388,-0.027429873123764992,0.020677687600255013,0.027822932228446007,0.007278602570295334,-0.017575332894921303,0.009756275452673435,0.015736380591988564,-0.012472590431571007,-0.002049519680440426,0.002479427494108677,-0.017406878992915154,-0.023274682462215424,-0.00022427587828133255,-0.04966575652360916,-0.025773411616683006,-0.015273133292794228,0.020214440301060677,0.0024373140186071396,-0.008380570448935032,-0.0057625193148851395,0.01308323536068201,-0.0046114190481603146,-0.01589079573750496,0.018207034096121788,-0.025843601673841476,-0.010317787528038025,-0.00953167024999857,-0.030855096876621246,-0.033438052982091904,0.02356947585940361,0.012676138430833817,-0.012627006508409977,-0.04522981122136116,0.024678463116288185,0.013735992833971977,-0.006783769931644201,0.0035076967906206846,0.031669288873672485,-0.002103916136547923,-0.006650410592556,0.026180507615208626,-0.021154973655939102,-0.004516663961112499,-0.0006641636718995869,0.0037656414788216352,0.027486024424433708,-0.020045986399054527,-0.0008624477195553482,-0.008282305672764778,0.017350727692246437,-0.023625627160072327,0.00012348881864454597,-0.014823922887444496,-0.02097248286008835,-0.03077086992561817,0.015904834493994713,-0.007552339695394039,0.012619988061487675,-0.031192004680633545,0.0037024712655693293,-0.003532262984663248,-0.0013625446008518338,-0.028496745973825455,-0.019638890400528908,-0.009980879724025726,0.029760148376226425,0.029619770124554634,0.0023565967567265034,0.03776169940829277,-0.006681995466351509,-0.016115400940179825,-0.0072364890947937965,0.024102913215756416,0.015441586263477802,-0.01396761741489172,0.03795822709798813,-0.020312706008553505,0.0018284242833033204,-0.011658397503197193,0.0175612960010767,0.03543142229318619,0.02316237986087799,0.027401797473430634,-0.019961759448051453,-0.020214440301060677,-0.012619988061487675,-0.012605950236320496,-0.016803253442049026,-0.053259436041116714,-0.03189389407634735,0.011005640029907227,-0.009608877822756767,-0.02275528386235237,0.011553114280104637,0.040878091007471085,0.004407871048897505,-0.02905825898051262,-0.04539826512336731,0.02483287826180458,0.03225887939333916,-0.010647675953805447,-0.008394608274102211,0.020719802007079124,0.0058888597413897514,0.0048009296879172325,-0.004285040311515331,-0.03874434530735016,0.027668515220284462,-0.05648813024163246,-0.047363556921482086,-0.010689789429306984,0.00007495968748116866,0.02970399707555771,0.003604206722229719,0.0975346788764,-0.026798171922564507,-0.020958444103598595,-0.0040183220990002155,0.03894087299704552,-0.004716702736914158,0.006422296166419983,0.0026566546875983477,0.004085001535713673,0.02612435631453991,0.013553502038121223,-0.0018021033611148596,0.010977564379572868,-0.009959823451936245,-0.011932135559618473,-0.013167462311685085,-0.012563836760818958,-0.03304499387741089,0.0033269599080085754,-0.030097056180238724,0.017168236896395683,-0.0046605514362454414,-0.0298443753272295,0.002081104787066579,0.0031655251514166594,-0.0016898008761927485,0.007601472083479166,0.006818864494562149,-0.0029023163951933384,0.02684028446674347,0.03708788380026817,0.016311930492520332,-0.004092020448297262,0.02411695010960102,0.014599318616092205,0.010563449002802372,-0.03604908660054207,-0.017069971188902855,0.052276790142059326,-0.006383692380040884,-0.0020986520685255527,0.02998475357890129,-0.001143203815445304,0.0005852010217495263,0.0012370815966278315,-0.002814579987898469,-0.0057098777033388615,-0.03225887939333916,-0.0392216295003891,0.029423240572214127,-0.02719123102724552,-0.010682770051062107,-0.01028269249945879,0.02306411601603031,0.003425224684178829,-0.017785899341106415,-0.0040077934972941875,0.00006262177339522168,0.06844834238290787,-0.006503013428300619,-0.017645522952079773,-0.012037418782711029,0.00539753632619977,-0.016971707344055176,-0.014936225488781929,0.014711620286107063,-0.004390324000269175,-0.0017985939048230648,0.02390638366341591,-0.06092407926917076,-0.002832127269357443,0.014725658111274242,0.017098046839237213,-0.019835419952869415,0.022530678659677505,-0.005025534424930811,-0.004885156638920307,-0.0024004648439586163,0.0010151088936254382,0.002819844288751483,0.004344700835645199,0.04668974131345749,0.012163759209215641,0.024678463116288185,0.013855314813554287,-0.026966625824570656,-0.015750417485833168,-0.041355375200510025,0.02824406512081623,-0.014894112013280392,0.031500834971666336,0.0051729315891861916,-0.05351211503148079,0.030742794275283813,0.017041897401213646,-0.019723117351531982,0.009264951571822166,-0.0017468294827267528,-0.01596098579466343,-0.004046397749334574,0.0034217152278870344,0.0019547645933926105,-0.013041121885180473,0.02848270907998085,-0.01664883829653263,-0.037705548107624054,-0.02967592142522335,0.021463805809617043,-0.002017934573814273,0.017238425090909004,-0.016087325289845467,0.009180725552141666,0.007636566646397114,-0.03211849927902222,-0.01927390694618225,-0.0060187093913555145,-0.00286897667683661,-0.0015783758135512471,-0.015034490264952183,0.00608889851719141,-0.002449597232043743,0.022151658311486244,-0.014599318616092205,0.036133311688899994,0.027991384267807007,-0.02705085277557373,0.002449597232043743,0.013125348836183548,0.012395382858812809,-0.023850232362747192,0.02247452735900879,-0.0006330173346213996,0.016564611345529556,-0.014585280790925026,0.024678463116288185,0.020916331559419632,-0.00035971877514384687,0.007397923618555069,0.007889246568083763,-0.01325168926268816,-0.004232398699969053,0.007355810143053532,-0.01681729219853878,0.02967592142522335,0.026236658915877342,0.014367694035172462,-0.0019933683797717094,0.016466345638036728,-0.03147276118397713,0.04368565231561661,0.003723528003320098,-0.0069908276200294495,-0.008268267847597599,-0.0025496166199445724,0.007559358607977629,0.02271316945552826,0.0008084899163804948,-0.01719631254673004,-0.027022777125239372,-0.011679454706609249,-0.01431154366582632,0.006636372767388821,-0.035319119691848755,-0.02981629967689514,0.007966455072164536,-0.004762325901538134,-0.013820219784975052,-0.002807561308145523,-0.0029760149773210287,-0.03632984310388565,0.008191059343516827,-0.0055203670635819435,-0.01200934313237667,0.020621536299586296,-0.050704553723335266,0.017378803342580795,0.0031234119087457657,0.032286953181028366,0.003174298908561468,0.007425999268889427,0.015581964515149593,-0.006692524068057537,-0.023625627160072327,0.037228260189294815,-0.0031041097827255726,-0.032146576792001724,-0.009440424852073193,-0.014866036362946033,-0.0073768668808043,0.008892949670553207,-0.0070329406298696995,0.022263960912823677,0.004727231338620186,0.05884648114442825,0.009068422950804234,0.012290098704397678,-0.004032359924167395,-0.015301208943128586,-0.026348961517214775,0.012879687361419201,-0.03175351768732071,-0.004425418563187122,-0.0052361018024384975,-0.013181500136852264,-0.007425999268889427,0.023036040365695953,-0.0005093091749586165,-0.016634799540042877,0.001991613768041134,0.0028303726576268673,0.025927826762199402,0.011160056106746197,-0.005643197800964117,-0.007840114645659924,0.016690950840711594,-0.013371010310947895,0.0006281918031163514,0.029451316222548485,-0.01207251287996769,0.027780817821621895,-0.01278844103217125,-0.052922528237104416,0.028286179527640343,-0.005018515512347221,-0.03680712729692459,-0.0015862720320001245,-0.011883002705872059,-0.0020407461561262608,-0.008864874951541424,0.007980492897331715,0.02588571421802044,0.05109761282801628,0.02568918466567993,0.005078176502138376,0.017645522952079773,-0.0009282499086111784,-0.043096065521240234,-0.0382109060883522,0.033438052982091904,0.005808142013847828,-0.0036006972659379244,-0.0474197082221508,-0.0011247792281210423,-0.03972699120640755,-0.007819058373570442,-0.01965292915701866,-0.019021227955818176,-0.014248372986912727,0.0015090641099959612,0.04172036051750183,-0.05539318174123764,0.005078176502138376,0.021548032760620117,-0.006871506106108427,-0.0043060970492661,0.006264370866119862,-0.041804585605859756,-0.00099317473359406,0.03096739947795868,-0.03891279920935631,-0.012149721384048462,0.007861170917749405,-0.004643004387617111,-0.013048140332102776,-0.012163759209215641,-0.002581201493740082,0.0011045999126508832,-0.014367694035172462,-0.008205097168684006,0.0024109932128340006,-0.0015090641099959612,0.018066655844449997,-0.0049167415127158165,0.0044920979999005795,-0.011454849503934383,-0.004639494698494673,-0.007798001170158386,0.024552123621106148,-0.0018301790114492178,0.009075441397726536,0.038182832300662994,-0.022825472056865692,0.019245831295847893,-0.004920251201838255,0.0073417723178863525,-0.03885664790868759,0.013876371085643768,0.01569426618516445,-0.03534719720482826,0.013483312912285328,0.020200403407216072,-0.007447056006640196,0.022895662114024162,0.03001282922923565,-0.031837742775678635,-0.014599318616092205,0.016550572589039803,-0.015736380591988564,-0.022979889065027237,-0.03734056279063225,0.009447443298995495,0.019217755645513535,-0.03599293529987335,-0.04303991422057152,0.025183824822306633,0.03192197158932686,0.030827021226286888,0.014283468015491962,0.019021227955818176,-0.015581964515149593,0.016873443499207497,0.002649635775014758,-0.0015810078475624323,-0.06294552236795425,0.01746303029358387,0.003720018547028303,0.01289372518658638,0.03795822709798813,-0.024327518418431282,-0.004769344814121723,0.024538084864616394,0.001988104311749339,-0.016901519149541855,-0.013104291632771492,-0.08108236640691757,-0.028131762519478798,0.014557205140590668,-0.00915966834872961,0.001396761741489172,0.01241643913090229,-0.013111311011016369,0.0049693831242620945,0.0014011485036462545,0.017575332894921303,0.052613697946071625,0.014936225488781929,0.01641019433736801,-0.01367984153330326,0.03520681709051132,-0.03113585337996483,-0.04587554931640625,-0.006534598767757416,-0.007306678220629692,-0.0029444298706948757,-0.00555195240303874,0.0255768820643425,0.024439821019768715,0.0013125349069014192,0.02244645170867443,0.04073771461844444,0.00022701764828525484,0.00011350882414262742,-0.03251155838370323,-0.01236730720847845,-0.005057119764387608,0.027401797473430634,0.03618946298956871,-0.005411574151366949,0.007348791230469942,0.04329259321093559,0.005650216713547707,0.02731757052242756,0.00698380870744586,-0.005109761375933886,-0.0032655445393174887,0.04475252702832222,-0.02366774156689644,-0.007306678220629692,-0.019807344302535057,-0.005358932539820671,-0.036554448306560516,-0.013771087862551212,-0.006411768030375242,-0.008906987495720387,0.04781276732683182,0.013560520485043526,0.037228260189294815,0.030518190935254097,-0.04882349073886871,0.006341578904539347,0.006383692380040884,-0.04918847233057022,0.012037418782711029,0.0004303464957047254,0.003474357072263956,0.02817387692630291,0.0002879943640436977,-0.013539464212954044,-0.04143960401415825]

// const results = db.notes.aggregate([
//   {
//     $vectorSearch: {
//       index: "notes_vector_index",
//       path: "embedding",
//       queryVector,
//       numCandidates: 200,
//       limit: 20,
//       filter: { docKind: "note" }
//     }
//   },
//   {
//     $project: {
//       title: 1,
//       docKind: 1,
//       hasRecipe: { $ne: ["$recipe", null] },
//       score: { $meta: "vectorSearchScore" },
//     },
//   },
// ]).toArray();

// print(`count=${results.length}`);
// printjson(results.slice(0, 5));

// const leaked = results.filter(r => r.docKind !== "note");
// print(`LEAKED non-notes in notes scope = ${leaked.length}`);
// if (leaked.length) printjson(leaked.slice(0, 3));

function runVector(label, extraVectorSearch) {
  const pipeline = [
    {
      $vectorSearch: Object.assign(
        {
          index: "notes_vector_index",
          path: "embedding",
          queryVector,
          numCandidates: 200,
          limit: 20,
        },
        extraVectorSearch || {}
      ),
    },
    {
      $project: {
        title: 1,
        docKind: 1,
        hasRecipe: { $ne: ["$recipe", null] },
        hasEmbedding: { $ne: [{ $ifNull: ["$embedding", null] }, null] },
        hasRecipeEmbedding: { $ne: [{ $ifNull: ["$recipeEmbedding", null] }, null] },
        score: { $meta: "vectorSearchScore" },
      },
    },
  ];

  const results = db.notes.aggregate(pipeline).toArray();
  print(`\n=== ${label} ===`);
  print(`count=${results.length}`);
  printjson(results.slice(0, 8));

  const counts = results.reduce(
    (acc, r) => {
      acc.total++;
      acc.byKind[r.docKind || "MISSING"] = (acc.byKind[r.docKind || "MISSING"] || 0) + 1;
      if (r.hasRecipe) acc.hasRecipe++;
      if (r.hasEmbedding) acc.hasEmbedding++;
      if (r.hasRecipeEmbedding) acc.hasRecipeEmbedding++;
      return acc;
    },
    { total: 0, byKind: {}, hasRecipe: 0, hasEmbedding: 0, hasRecipeEmbedding: 0 }
  );

  print("summary:");
  printjson(counts);

  return results;
}

// 1) NOTES scope behavior (what you're currently doing)
const notes = runVector("NOTES (filter docKind=note)", { filter: { docKind: "note" } });

// 2) ALL behavior *as currently implemented* if it still uses path:"embedding":
//    (no filter)
const all = runVector("ALL (no filter, still path=embedding)", {});

// Compare IDs to see if theyâ€™re identical
const notesIds = notes.map(r => String(r._id)).join(",");
const allIds = all.map(r => String(r._id)).join(",");
print(`\nIDs identical? ${notesIds === allIds}`);

// 3) Eligibility check: do recipes even have `embedding`?
print("\n=== DB sanity checks ===");
print("recipes with embedding present:");
print(db.notes.countDocuments({ docKind: "recipe", embedding: { $exists: true, $ne: [] } }));
print("recipes with recipeEmbedding present:");
print(db.notes.countDocuments({ docKind: "recipe", recipeEmbedding: { $exists: true, $ne: [] } }));
print("notes with embedding present:");
print(db.notes.countDocuments({ docKind: "note", embedding: { $exists: true, $ne: [] } }));
print("notes with recipeEmbedding present:");
print(db.notes.countDocuments({ docKind: "note", recipeEmbedding: { $exists: true, $ne: [] } }));
